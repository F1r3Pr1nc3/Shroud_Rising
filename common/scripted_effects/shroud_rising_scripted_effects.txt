# Call this from the Situation, at the end
cleanup_cult_uprising_situation = {
	owner = {
		every_owned_planet = {
			limit = { has_planet_flag = cult_uprising_planet }
			remove_planet_flag = cult_uprising_planet
			if = {
				limit = { has_modifier = cult_pleasure }
				remove_modifier = cult_pleasure
			}
			if = {
				limit = { has_modifier = cult_disappearances }
				remove_modifier = cult_disappearances
			}
			if = {
				limit = { has_modifier = cult_sacrifices }
				remove_modifier = cult_sacrifices
			}
		}
	}
}
# TODO?
# add_random_character_trait = {
# 	save_event_target_as = corrupted_leader
# 	random_list = {
# 			8 = { add_random_negative_character_trait = yes }
# 			2 = { add_random_positive_character_trait = yes }
# 	}
# }
# add_random_positive_character_trait = {
# 	random_list = {
# 		70 = { add_trait = leader_trait_loyalist }
# 		30 = { add_trait = leader_trait_shroud_inquisitor }
# 	}
# }
# If is chosen of a power, give them the associated cultist trait
add_random_negative_character_trait = {
	save_event_target_as = corrupted_leader
	random_list = {
			25 = { modifier = { factor = 0 has_trait = leader_trait_cultist_whisperers }	add_trait_no_notify = leader_trait_cultist_whisperers }
			25 = { modifier = { factor = 0 has_trait = leader_trait_cultist_eater }			add_trait_no_notify = leader_trait_cultist_eater }
			25 = { modifier = { factor = 0 has_trait = leader_trait_cultist_composer }		add_trait_no_notify = leader_trait_cultist_composer }
			25 = { modifier = { factor = 0 has_trait = leader_trait_cultist_instrument }	add_trait_no_notify = leader_trait_cultist_instrument }
	}
	change_background_ethic = ethic_spiritualist
	root = {
		create_message = {	# Notify of corruption
			type = MESSAGE_LEADER_CORRUPTED
			localization =  MESSAGE_LEADER_CORRUPTED_DESC
			days = @trait_sorting_priority_yes_negative # 20
			target = event_target:corrupted_leader
			variable = { type = name localization = LEADER scope = event_target:corrupted_leader }
			variable = { key = "border" value = "GFX_border_veteran" }
		}
	}
}
